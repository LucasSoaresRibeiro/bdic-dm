<html>
<head>
	<script type="text/javascript" src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
	<script type="text/javascript">


		function buy(){

			if (navigator.geolocation) {
        		navigator.geolocation.getCurrentPosition(function(loc){

        			var parametros = { 
				        token: "1a87bb69-831e-4991-9917-e3adce68920e", //token-login
						creditcardNumber: "1234567890", // cartão de crédito
						cod_cliente: 1,
						cod_credit_card: 123,
						products: [{
							cod: 1,
							value: 100,
							qtd:1
						},
						{
							cod: 2,
							value: 50,
							qtd: 1
						}],
						value: 150, //valor total da venda
						geo: {
							lat: loc.coords.latitude,
							lon: loc.coords.longitude,
						},
						segment: "E-COMMERCE-VAREJO"
					};

					//console.log(parametros);

        			$.ajax({
					    type: 'POST',
					    url: '/api/transaction/buy',
					    contentType: "application/json",
					    dataType: 'json',
					    data: JSON.stringify(parametros),
					    success: function(data){

					    	var res = JSON.stringify(data);
					        $('#res_buy').html(res);

					    },
					    error: function(e, s, m){

					    	var res = JSON.stringify(m);
					    	$('#res_buy').html(res);

					    }
					});
        		});
        	}
		}

		function confirm(){

			var parametros = { 
				token:'b30be629-18ef-11e5-9b5c-974e1ba6f43c',
				status:'ok' //ok:confirmado ou n_ok: cancelada pelo usuário (notificação android)
			};

			$.ajax({
			    type: 'POST',
			    url: '/api/transaction/buy/confirm',
			    contentType: "application/json",
			    dataType: 'json',
			    data: JSON.stringify(parametros),
			    success: function(data){

			    	var res = JSON.stringify(data);
			        $('#res_buy_confirm').html(res);

			    },
			    error: function(e, s, m){

			    	var res = JSON.stringify(m);
			    	$('#res_buy_confirm').html(res);

			    }
			});
		}

	</script>
</head>
<body>
	<button onclick="buy()">Enviar parametros buy</button><br/><br/>
	<div>Retorno do buy</div><br/>
	<div id="res_buy"></div>

	<br><br><hr><br>

	<button onclick="confirm()">Enviar parametros buy/confirm</button><br/><br/>
	<div>Retorno do buy/confirm</div><br/>
	<div id="res_buy_confirm"></div>
</body>
</html>